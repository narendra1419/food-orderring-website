
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up - REX Food Delivery</title>
  
  <!-- Preload critical resources -->
  <link rel="preload" href="assets/css/consolidated-styles.css" as="style">
  <link rel="preload" href="assets/js/app-optimized.js" as="script">
  
  <!-- External fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  
  <!-- Consolidated Stylesheet -->
  <link rel="stylesheet" href="assets/css/consolidated-styles.css">
  
  <!-- Meta tags for SEO -->
  <meta name="description" content="Sign up for REX Food Delivery account">
  <meta name="keywords" content="signup, register, food delivery, account">
  <meta name="author" content="TEAM REX">
  
  <!-- Security headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;">
</head>
<body>

  <!-- Background Video -->
  <div class="video-container">
    <video autoplay muted loop class="background-video" playsinline>
      <source src="854216-hd_1920_1080_25fps.mp4" type="video/mp4">
      Your browser does not support HTML5 video.
    </video>
  </div>

  <!-- Main Content -->
  <main>
    <section class="section" style="min-height: 100vh; display: flex; align-items: center;">
      <div class="container">
        <div class="form-container" style="max-width: 500px;">
          <div class="text-center" style="margin-bottom: var(--spacing-lg);">
            <h1>Create Your Account</h1>
            <p class="section-subtitle">Join REX Food Delivery and enjoy personalized features and faster ordering!</p>
          </div>
          
          <!-- Signup Form -->
          <form id="signup-form" class="signup-form" novalidate>
            <fieldset>
              <legend>Sign-Up Form</legend>

              <!-- Name -->
              <div class="form-group">
                <label for="name">Full Name</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  placeholder="Enter your full name" 
                  required 
                  autocomplete="name"
                  aria-describedby="name-error"
                >
              </div>

              <!-- Email -->
              <div class="form-group">
                <label for="email">Email Address</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  placeholder="Enter your email address" 
                  required 
                  autocomplete="email"
                  aria-describedby="email-error"
                >
              </div>

              <!-- Password -->
              <div class="form-group">
                <label for="password">Password</label>
                <div style="position: relative;">
                  <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    placeholder="Create a strong password" 
                    required 
                    autocomplete="new-password"
                    aria-describedby="password-error password-hint"
                  >
                  <button 
                    type="button" 
                    class="password-toggle" 
                    onclick="togglePassword('password')"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;"
                    aria-label="Toggle password visibility"
                  >
                    <i class="fas fa-eye"></i>
                  </button>
                </div>
                <small id="password-hint" style="color: rgba(255,255,255,0.7); font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                  Must be at least 6 characters long
                </small>
              </div>

              <!-- Confirm Password -->
              <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <div style="position: relative;">
                  <input 
                    type="password" 
                    id="confirm-password" 
                    name="confirm-password" 
                    placeholder="Confirm your password" 
                    required 
                    autocomplete="new-password"
                    aria-describedby="confirm-password-error"
                  >
                  <button 
                    type="button" 
                    class="password-toggle" 
                    onclick="togglePassword('confirm-password')"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer;"
                    aria-label="Toggle password visibility"
                  >
                    <i class="fas fa-eye"></i>
                  </button>
                </div>
              </div>

              <!-- Terms and Conditions -->
              <div class="form-group">
                <label style="display: flex; align-items: flex-start; gap: var(--spacing-xs); cursor: pointer;">
                  <input type="checkbox" id="terms" name="terms" required style="width: auto; margin-top: 0.25rem;">
                  <span style="line-height: 1.4;">
                    I agree to the <a href="#" style="color: var(--accent-color);">Terms of Service</a> 
                    and <a href="#" style="color: var(--accent-color);">Privacy Policy</a>
                  </span>
                </label>
              </div>

              <!-- Newsletter Subscription -->
              <div class="form-group">
                <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer;">
                  <input type="checkbox" id="newsletter" name="newsletter" style="width: auto;">
                  <span>Subscribe to our newsletter for special offers and updates</span>
                </label>
              </div>

              <div class="form-actions">
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                  <span class="btn-text">Create Account</span>
                  <span class="loading" style="display: none;"></span>
                </button>
              </div>
            </fieldset>
          </form>

          <!-- Login Link -->
          <div class="text-center" style="margin-top: var(--spacing-lg);">
            <p>Already have an account? <a href="login.html" class="btn-link">Login</a></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Reusable Footer Component -->
  <div id="footer-container"></div>

  <!-- Optimized JavaScript -->
  <script src="assets/js/app-optimized.js"></script>
  
  <!-- Additional Signup Functionality -->
  <script>
    // Password toggle functionality
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const icon = input.nextElementSibling.querySelector('i');
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.className = 'fas fa-eye-slash';
      } else {
        input.type = 'password';
        icon.className = 'fas fa-eye';
      }
    }

    // Enhanced form validation
    document.getElementById('signup-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = document.getElementById('name');
      const email = document.getElementById('email');
      const password = document.getElementById('password');
      const confirmPassword = document.getElementById('confirm-password');
      const terms = document.getElementById('terms');
      let isValid = true;

      // Clear previous errors
      document.querySelectorAll('.field-error').forEach(error => error.remove());
      document.querySelectorAll('.error').forEach(field => field.classList.remove('error'));

      // Validate name
      if (!name.value.trim()) {
        showFieldError(name, 'Full name is required');
        isValid = false;
      } else if (name.value.trim().length < 2) {
        showFieldError(name, 'Name must be at least 2 characters long');
        isValid = false;
      }

      // Validate email
      if (!email.value.trim()) {
        showFieldError(email, 'Email is required');
        isValid = false;
      } else if (!window.FormValidator.validateEmail(email.value)) {
        showFieldError(email, 'Please enter a valid email address');
        isValid = false;
      }

      // Validate password
      if (!password.value.trim()) {
        showFieldError(password, 'Password is required');
        isValid = false;
      } else if (!window.FormValidator.validatePassword(password.value)) {
        showFieldError(password, 'Password must be at least 6 characters long');
        isValid = false;
      }

      // Validate confirm password
      if (!confirmPassword.value.trim()) {
        showFieldError(confirmPassword, 'Please confirm your password');
        isValid = false;
      } else if (password.value !== confirmPassword.value) {
        showFieldError(confirmPassword, 'Passwords do not match');
        isValid = false;
      }

      // Validate terms
      if (!terms.checked) {
        showFieldError(terms, 'You must agree to the Terms of Service');
        isValid = false;
      }

      if (isValid) {
        // Let the AuthManager handle the actual signup
        console.log('Form is valid, proceeding with signup...');
      }
    });

    // Password strength indicator
    document.getElementById('password').addEventListener('input', function() {
      const password = this.value;
      const hint = document.getElementById('password-hint');
      
      if (password.length === 0) {
        hint.textContent = 'Must be at least 6 characters long';
        hint.style.color = 'rgba(255,255,255,0.7)';
      } else if (password.length < 6) {
        hint.textContent = 'Password too short';
        hint.style.color = 'var(--primary-color)';
      } else if (password.length < 8) {
        hint.textContent = 'Weak password';
        hint.style.color = 'var(--warning-color)';
      } else {
        hint.textContent = 'Strong password';
        hint.style.color = 'var(--success-color)';
      }
    });

    // Real-time password match validation
    document.getElementById('confirm-password').addEventListener('input', function() {
      const password = document.getElementById('password').value;
      const confirmPassword = this.value;
      
      if (confirmPassword && password !== confirmPassword) {
        showFieldError(this, 'Passwords do not match');
      } else {
        window.FormValidator.clearFieldError(this);
      }
    });

    // Field error helper
    function showFieldError(field, message) {
      field.classList.add('error');
      
      const errorElement = document.createElement('div');
      errorElement.className = 'field-error';
      errorElement.textContent = message;
      errorElement.style.color = 'var(--primary-color)';
      errorElement.style.fontSize = '0.9rem';
      errorElement.style.marginTop = '0.25rem';
      
      field.parentNode.appendChild(errorElement);
    }

    // Auto-focus first empty field
    document.addEventListener('DOMContentLoaded', function() {
      const nameField = document.getElementById('name');
      if (!nameField.value) {
        nameField.focus();
      }
    });
  </script>
  
  <!-- Component Loader -->
  <script>
    // Load footer component (header not needed for signup page)
    fetch('components/footer.html')
      .then(r => r.text())
      .then(footerHtml => {
        document.getElementById('footer-container').innerHTML = footerHtml;
        
        // Execute footer scripts
        const footerScript = document.createElement('script');
        footerScript.textContent = document.querySelector('#footer-container script').textContent;
        document.head.appendChild(footerScript);
      })
      .catch(error => {
        console.error('Error loading footer component:', error);
      });
  </script>

  <!-- Additional CSS for signup page -->
  <style>
    .password-toggle:hover {
      opacity: 0.7;
    }
    
    .btn-link {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition-normal);
    }
    
    .btn-link:hover {
      color: var(--accent-color);
      text-decoration: underline;
    }
    
    .form-container fieldset {
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: var(--spacing-lg);
      border-radius: var(--radius-lg);
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
    }
    
    .form-container legend {
      padding: 0 var(--spacing-sm);
      color: var(--text-light);
      font-weight: 600;
    }
    
    .error {
      border-color: var(--primary-color) !important;
      box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.1) !important;
    }
    
    .field-error {
      animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Password strength indicator colors */
    .password-weak {
      color: var(--primary-color) !important;
    }
    
    .password-medium {
      color: var(--warning-color) !important;
    }
    
    .password-strong {
      color: var(--success-color) !important;
    }
  </style>

</body>
</html>
